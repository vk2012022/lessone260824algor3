#Привести строку к одному регистру, чтобы сравнение было нечувствительным к верхнему или нижнему регистру.
#Удалить из строки все символы, кроме букв и цифр (игнорировать пробелы, запятые и прочие символы).
#Сравнить строку с её перевёрнутой версией:
#Если строка равна своему перевёрнутому варианту, значит это палиндром.
#Если нет — не палиндром.

import re


def is_palindrome(s: str) -> bool:
    # 1. Приводим строку к нижнему регистру
    s = s.lower()

    # 2. Удаляем все символы, кроме букв и цифр
    s = re.sub(r'[^a-z0-9]', '', s)

    # 3. Проверяем, является ли строка палиндромом
    return s == s[::-1]

# Пример использования:
print(is_palindrome("A man, a plan, a canal: Panama"))  # Вернет True
print(is_palindrome("race a car"))  # Вернет False
print(is_palindrome("А роза упала на лапу Азора"))
print(is_palindrome("Аргентина манит негра"))
print(is_palindrome("Шалаш"))